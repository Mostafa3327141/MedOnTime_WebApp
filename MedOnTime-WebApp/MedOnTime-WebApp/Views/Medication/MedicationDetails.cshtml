@model Medication

@{  ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.imageSrc = Model.Id + ".jpg";
}

<div>
    <h1>Details</h1>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Medication Name
        </dt>
        <dd class="col-sm-10">
            @Model.MedicationName
        </dd>
        <dt class="col-sm-2">
            Method of Taking
        </dt>
        <dd class="col-sm-10">
            @Model.MethodOfTaking
        </dd>
        <dt class="col-sm-2">
            Medication Type
        </dt>
        <dd class="col-sm-10">
            @Model.MedicationType
        </dd>
        <dt class="col-sm-2">
            Quantity
        </dt>
        <dd class="col-sm-10">
            @Model.Quantity
        </dd>
        <dt class="col-sm-2">
            Time Of Taking
        </dt>
        <dd class="col-sm-10">
            @Model.FirstDoseTime
        </dd>
        <dt class="col-sm-2">
            Frequency
        </dt>
        <dd class="col-sm-10">
            @Model.Frequency
        </dd>
        @if (Model.MedicationImage != null) { 
        <dt class="col-sm-2">
            Medication Image
        </dt>
        <dd class="col-sm-10">
            <img src="~/img/@ViewBag.imageSrc" alt="@Model.MedicationName" width="300" style="object-fit:contain;" />
        </dd>
        }
        <dt class="col-sm-2">
            QRCode<br />
            <button onclick="PrintImage('https://api.qrserver.com/v1/create-qr-code/?data=@Model.Id'); return false;" id="printImage">Print QR Code</button>
        </dt>
        <dd download class="col-sm-10">
            <img id="QRIMG" src="https://api.qrserver.com/v1/create-qr-code/?data=@Model.Id" width="100" height="100" alt="QR code" /><br />
        </dd>
    </dl>

    @*<button onclick="PrintImage('imgs/480x480.jpg');" id="printImage">Print this Image</button>*@
</div>
<div>
    @Html.ActionLink("Edit", "MedicationEdit", new { Id = Model.Id }) |
    @Html.ActionLink("Delete", "MedicationDelete", new { Id = Model.Id }) |
    @Html.ActionLink("Back to list", "MedicationList")
</div>


<script>
    function ImagetoPrint(source) {
        return "<html><head><script>function step1(){\n" +
            "setTimeout('step2()', 10);}\n" +
            "function step2(){window.print();window.close()}\n" +
            "</scri" + "pt></head><body onload='step1()'>\n" +
            "<img src='" + source + "' /></body></html>";
    }
    function PrintImage(source) {
        Pagelink = "about:blank";
        var pwa = window.open(Pagelink, "_new");
        pwa.document.open();
        pwa.document.write(ImagetoPrint(source));
        pwa.document.close();
    }
</script>